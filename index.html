<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ржорж╛ржЯрж┐ ржУ ржорзГрзОрж╢рж┐рж▓рзНржк ржЗржиржнрзЯрзЗржЬ</title>
  <style>
    body {
      font-family: 'SolaimanLipi', sans-serif;
      background: linear-gradient(to bottom, #fff8f0, #f1e6d6);
      padding: 20px;
      margin: 0;
    }
    h1 {
      text-align: center;
      color: #5c4033;
      font-size: 32px;
      margin-bottom: 10px;
    }
    .container {
      max-width: 800px;
      margin: auto;
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }
    select,
    input,
    button,
    textarea,
    label {
      width: 100%;
      padding: 12px;
      margin-top: 12px;
      font-size: 16px;
      border-radius: 6px;
    }
    input, select, textarea {
      border: 1px solid #ccc;
    }
    button {
      background-color: #5c4033;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background-color: #7a523e;
    }
    textarea {
      height: 180px;
      resize: vertical;
    }
    .summary {
      background: #f7f3ef;
      padding: 12px;
      margin-top: 10px;
      border-radius: 6px;
    }
    .footer-buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 10px;
      margin-top: 15px;
    }
    .date {
      text-align: right;
      font-size: 14px;
      color: #777;
    }
    .totals {
      background: #eee9e2;
      padding: 10px;
      border-radius: 6px;
      margin-top: 10px;
    }
    .totals p {
      margin: 6px 0;
      font-weight: bold;
    }
    .quantity-buttons {
      display: inline-flex;
      gap: 4px;
    }
    .quantity-buttons button {
      padding: 2px 8px;
      font-size: 14px;
      font-weight: bold;
      background-color: #5c4033;
      color: white;
      border-radius: 4px;
    }
    @media print {
      body * {
        visibility: hidden;
      }
      .container, .container * {
        visibility: visible;
      }
      .footer-buttons,
      #invoiceText,
      #productSelect,
      label[for="deliveryCharge"],
      #deliveryCharge,
      label[for="paymentAmount"],
      #paymentAmount,
      button,
      .date {
        display: none !important;
      }
      .container {
        position: absolute;
        top: 0;
        left: 0;
      }
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body>
  <div class="container" id="invoiceContainer">
    <h1>ржорж╛ржЯрж┐ ржУ ржорзГрзОрж╢рж┐рж▓рзНржк ржЗржиржнрзЯрзЗржЬ</h1>
    <div class="date">рждрж╛рж░рж┐ржЦ: <span id="currentDate"></span></div>

    <select id="productSelect" onchange="addProduct()">
      <option value="">-- ржкржгрзНржп рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рзБржи --</option>
  <option value="380">ржмрзЬ рждрж░ржХрж╛рж░рж┐ ржкрж╛рждрж┐рж▓ ржврж╛ржХржирж╛ рж╕рж╣ - рзйрзорзж ржЯрж╛ржХрж╛</option>
  <option value="330">ЁЯФ┤ ржмрзЬ рждрж░ржХрж╛рж░рж┐ ржкрж╛рждрж┐рж▓ (ржврж╛ржХржирж╛ ржЫрж╛рзЬрж╛) - рзйрзйрзж ржЯрж╛ржХрж╛</option>
  <option value="330">ржЫрзЛржЯ рждрж░ржХрж╛рж░рж┐ ржкрж╛рждрж┐рж▓ ржврж╛ржХржирж╛ рж╕рж╣ - рзйрзйрзж ржЯрж╛ржХрж╛</option>
  <option value="280">ЁЯФ┤ ржЫрзЛржЯ рждрж░ржХрж╛рж░рж┐ ржкрж╛рждрж┐рж▓ (ржврж╛ржХржирж╛ ржЫрж╛рзЬрж╛) - рзирзорзж ржЯрж╛ржХрж╛</option>
  <option value="370">ржмрзЬ ржХрзЬрж╛ржЗ ржврж╛ржХржирж╛ рж╕рж╣ - рзйрзнрзж ржЯрж╛ржХрж╛</option>
  <option value="320">ЁЯФ┤ ржмрзЬ ржХрзЬрж╛ржЗ (ржврж╛ржХржирж╛ ржЫрж╛рзЬрж╛) - рзйрзирзж ржЯрж╛ржХрж╛</option>
  <option value="270">ржЫрзЛржЯ ржХрзЬрж╛ржЗ ржврж╛ржХржирж╛ рж╕рж╣ - рзирзнрзж ржЯрж╛ржХрж╛</option>
  <option value="220">ЁЯФ┤ ржЫрзЛржЯ ржХрзЬрж╛ржЗ (ржврж╛ржХржирж╛ ржЫрж╛рзЬрж╛) - рзирзирзж ржЯрж╛ржХрж╛</option>
  <option value="370">ржмрзЬ ржнрж╛рждрзЗрж░ ржкрж╛рждрж┐рж▓ ржврж╛ржХржирж╛ рж╕рж╣ - рзйрзнрзж ржЯрж╛ржХрж╛</option>
  <option value="320">ЁЯФ┤ ржмрзЬ ржнрж╛рждрзЗрж░ ржкрж╛рждрж┐рж▓ (ржврж╛ржХржирж╛ ржЫрж╛рзЬрж╛) - рзйрзирзж ржЯрж╛ржХрж╛</option>
  <option value="320">ржорж╛ржЭрж╛рж░рж┐ ржнрж╛рждрзЗрж░ ржкрж╛рждрж┐рж▓ ржврж╛ржХржирж╛ рж╕рж╣ - рзйрзирзж ржЯрж╛ржХрж╛</option>
  <option value="270">ЁЯФ┤ ржорж╛ржЭрж╛рж░рж┐ ржнрж╛рждрзЗрж░ ржкрж╛рждрж┐рж▓ (ржврж╛ржХржирж╛ ржЫрж╛рзЬрж╛) - рзирзнрзж ржЯрж╛ржХрж╛</option>
  <option value="270">ржЫрзЛржЯ ржнрж╛рждрзЗрж░ ржкрж╛рждрж┐рж▓ ржврж╛ржХржирж╛ рж╕рж╣ - рзирзнрзж ржЯрж╛ржХрж╛</option>
  <option value="220">ЁЯФ┤ ржЫрзЛржЯ ржнрж╛рждрзЗрж░ ржкрж╛рждрж┐рж▓ (ржврж╛ржХржирж╛ ржЫрж╛рзЬрж╛) - рзирзирзж ржЯрж╛ржХрж╛</option>
  <option value="250">ржЪрж╛рзЯрзЗрж░ ржкрж╛рждрж┐рж▓ ржврж╛ржХржирж╛ рж╕рж╣ - рзирзлрзж ржЯрж╛ржХрж╛</option>
  <option value="330">ржжрзБржз/ржбрж╛рж▓ ржкрж╛рждрж┐рж▓ ржврж╛ржХржирж╛ рж╕рж╣ - рзйрзйрзж ржЯрж╛ржХрж╛</option>
  <option value="280">ЁЯФ┤ ржжрзБржз/ржбрж╛рж▓ ржкрж╛рждрж┐рж▓ (ржврж╛ржХржирж╛ ржЫрж╛рзЬрж╛) - рзирзорзж ржЯрж╛ржХрж╛</option>
  <option value="370">рж╕рзНржЯрж┐ржорж╛рж░ / ржкрж┐ржарж╛ ржнрж╛ржкрзЗ рж╕рзЗржжрзНржз ржХрж░рж╛рж░ ржкрж╛рждрж┐рж▓ ржврж╛ржХржирж╛ рж╕рж╣ - рзйрзнрзж ржЯрж╛ржХрж╛</option>
  <option value="320">ЁЯФ┤рж╕рзНржЯрж┐ржорж╛рж░ / ржкрж┐ржарж╛ ржнрж╛ржкрзЗ рж╕рзЗржжрзНржз ржХрж░рж╛рж░ ржкрж╛рждрж┐рж▓ (ржврж╛ржХржирж╛ ржЫрж╛рзЬрж╛) - рзйрзирзж ржЯрж╛ржХрж╛</option>
  <option value="370">ржнрж╛ржкрж╛ ржкрж┐ржарж╛рж░ ржкрж╛рждрж┐рж▓ ржврж╛ржХржирж╛ рж╕рж╣ - рзйрзнрзж ржЯрж╛ржХрж╛</option>
  <option value="420">ржнрж╛ржкрж╛ ржкрж┐ржарж╛рж░ ржкрж╛рждрж┐рж▓ ржкрж┐ржарж╛рж░ ржмрж╛ржЯрж┐ рж╕рж╣ - рзкрзирзж ржЯрж╛ржХрж╛</option>
  <option value="220">ржЪрж┐рждржЗ ржкрж┐ржарж╛рж░ ржЦрзЛрж▓рж╛ ржврж╛ржХржирж╛ рж╕рж╣ - рзирзирзж ржЯрж╛ржХрж╛</option>
  <option value="270">ржЦрзЛрж▓ржЬрж╛ ржкрж┐ржарж╛рж░ ржЦрзЛрж▓рж╛ ржврж╛ржХржирж╛ рж╕рж╣ - рзирзнрзж ржЯрж╛ржХрж╛</option>
  <option value="370">рзн ржЦрзЛржкрзЗрж░ ржЪрж┐рждржЗ ржкрж┐ржарж╛рж░ ржЫрж╛ржБржЪ ржврж╛ржХржирж╛ рж╕рж╣ - рзйрзнрзж ржЯрж╛ржХрж╛</option>
  <option value="320">рзл ржЦрзЛржкрзЗрж░ ржЪрж┐рждржЗ ржкрж┐ржарж╛рж░ ржЫрж╛ржБржЪ ржврж╛ржХржирж╛ рж╕рж╣ - рзйрзирзж ржЯрж╛ржХрж╛</option>
  <option value="250">рждрж╛ржУрзЯрж╛ - рзирзлрзж ржЯрж╛ржХрж╛</option>
  <option value="110">ржЬрж▓ржХрж╛ржирзНржжрж╛ (ржкрж╛рждрж┐рж▓ ржмрж╕рж╛ржирзЛрж░ ржкрж╛рждрзНрж░) - рззрззрзж ржЯрж╛ржХрж╛</option>
  <option value="250">ржХрзЯрзЗрж▓ржжрж╛ржирж┐ - рзирзлрзж ржЯрж╛ржХрж╛</option>
  <option value="250">ржмрж╛ржЯрж┐ - рззрзирзж ржЯрж╛ржХрж╛</option>
  <option value="250">ржкрзНрж▓рзЗржЯ  - рзирзжрзж ржЯрж╛ржХрж╛</option>
  <option value="250">ржЧрзЛрж▓ ржЧрзНрж▓рж╛рж╕ - рззрзлрзж ржЯрж╛ржХрж╛</option>
  <option value="250">ржирж░ржорж╛рж▓ ржЧрзНрж▓рж╛рж╕ - рззрзйрзж ржЯрж╛ржХрж╛</option>
  <option value="1200">рззрзк рж▓рж┐ржЯрж╛рж░ ржХрж▓рж╕рж┐ (ржЯрзНржпрж╛ржк, ржврж╛ржХржирж╛ ржУ ржЬрж▓ржХрж╛ржирзНржжрж╛ рж╕рж╣) - рззрзирзжрзж ржЯрж╛ржХрж╛</option>
  <option value="850">рзн рж▓рж┐ржЯрж╛рж░ ржХрж▓рж╕рж┐ (ржЯрзНржпрж╛ржк, ржврж╛ржХржирж╛ ржУ ржЬрж▓ржХрж╛ржирзНржжрж╛ рж╕рж╣) - рзорзлрзж ржЯрж╛ржХрж╛</option>
  <option value="750">рзл рж▓рж┐ржЯрж╛рж░ ржХрж▓рж╕рж┐ (ржЯрзНржпрж╛ржк, ржврж╛ржХржирж╛ ржУ ржЬрж▓ржХрж╛ржирзНржжрж╛ рж╕рж╣) - рзнрзлрзж ржЯрж╛ржХрж╛</option>
    </select>

    <div id="selectedItems" class="summary"></div>

    <div class="totals">
      <p>ржорзЛржЯ ржкржгрзНржпрзЗрж░ ржорзВрж▓рзНржп: <span id="productTotal">рз│ рзж</span></p>
    </div>

    <label for="deliveryCharge">ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржЪрж╛рж░рзНржЬ</label>
    <input type="number" id="deliveryCharge" placeholder="ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржЪрж╛рж░рзНржЬ (рз│)" />

    <label for="paymentAmount">ржкрзЗржорзЗржирзНржЯ</label>
    <input type="number" id="paymentAmount" placeholder="ржЧрзНрж░рж╛рж╣ржХ ржХржд ржЯрж╛ржХрж╛ ржЕржЧрзНрж░рж┐ржо ржжрж┐ржмрзЗ (рз│)" />

    <button onclick="submitInvoice()">Submit</button>
    <button onclick="clearAll()">Clear</button>

    <div class="totals" id="finalSummary" style="display: none;">
      <p>ржкржгрзНржпрзЗрж░ ржорзВрж▓рзНржп: <span id="invoiceProductTotal">рз│ рзж</span></p>
      <p>ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржЪрж╛рж░рзНржЬ: <span id="invoiceDelivery">рз│ рзж</span></p>
      <p>рж╕рж░рзНржмржорзЛржЯ ржорзВрж▓рзНржп: <span id="invoiceTotal">рз│ рзж</span></p>
    </div>

    <textarea id="invoiceText" readonly></textarea>

    <div class="footer-buttons">
      <button onclick="copyText()">Copy Text</button>
      <button onclick="downloadPDF()">PDF ржбрж╛ржЙржирж▓рзЛржб</button>
      <button onclick="submitAndPrint()">ржкрзНрж░рж┐ржирзНржЯ</button>
    </div>
  </div>

  <script>
    const selectedItems = [];

    function updateDate() {
      const today = new Date();
      const formatted = today.toLocaleDateString("bn-BD", {
        year: "numeric",
        month: "long",
        day: "numeric",
      });
      document.getElementById("currentDate").textContent = formatted;
    }

    function addProduct() {
      const select = document.getElementById("productSelect");
      const price = parseInt(select.value);
      if (!price) return;
      const text = select.options[select.selectedIndex].text;

      const existingItem = selectedItems.find((item) => item.text === text);
      if (existingItem) {
        existingItem.quantity += 1;
      } else {
        selectedItems.push({ text, price, quantity: 1 });
      }

      renderItems();
      select.selectedIndex = 0;
    }

    function changeQuantity(index, delta) {
      const item = selectedItems[index];
      item.quantity += delta;
      if (item.quantity <= 0) {
        selectedItems.splice(index, 1);
      }
      renderItems();
    }

    function renderItems() {
      const container = document.getElementById("selectedItems");
      let html = "<ul style='list-style:none;padding-left:0'>";
      let total = 0;

      selectedItems.forEach((item, index) => {
        const itemTotal = item.price * item.quantity;
        html += `
          <li style="margin-bottom:8px; display:flex; justify-content:space-between; align-items:center;">
            <span>${item.text} - ${item.price} ржЯрж╛ржХрж╛ - ${item.quantity} ржкрж┐рж╕ = рз│${itemTotal}</span>
            <span class="quantity-buttons">
              <button onclick="changeQuantity(${index}, 1)">я╝Л</button>
              <button onclick="changeQuantity(${index}, -1)">тИТ</button>
            </span>
          </li>`;
        total += itemTotal;
      });

      html += "</ul>";
      container.innerHTML = html;
      document.getElementById("productTotal").innerText = `рз│ ${total}`;
    }

    function submitInvoice() {
      const delivery = parseInt(document.getElementById("deliveryCharge").value) || 0;
      const paymentAmount = parseInt(document.getElementById("paymentAmount").value) || 0;
      const productTotal = selectedItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
      const total = productTotal + delivery;
      const due = total - paymentAmount;
      const today = document.getElementById("currentDate").textContent;

      let text = `ржЗржиржнрзЯрзЗржЬ рждрж╛рж░рж┐ржЦ: ${today}\nржкржгрзНржпрзЗрж░ ржмрж┐ржмрж░ржг:\n`;
      selectedItems.forEach((item) => {
        const itemTotal = item.price * item.quantity;
        text += `- ${item.text} (${item.quantity} ржкрж┐рж╕) = рз│${itemTotal}\n`;
      });

      text += `\nржкржгрзНржпрзЗрж░ ржорзВрж▓рзНржп: рз│${productTotal}\n`;
      text += `ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржЪрж╛рж░рзНржЬ: рз│${delivery}\n`;
      text += `рж╕рж░рзНржмржорзЛржЯ ржорзВрж▓рзНржп: рз│${total}\n`;
      if (paymentAmount > 0) {
        text += `\n${paymentAmount} ржЯрж╛ржХрж╛ ржмрж┐ржХрж╛рж╢ ржХрж░рзЗ ржЕрж░рзНржбрж╛рж░ ржХржиржлрж╛рж░рзНржо ржХрж░ржмрзЗржи ржмрж╛ржХрж┐ ${due} ржЯрж╛ржХрж╛ ржкржирзНржпрзЗ рж░рж┐рж╕рж┐ржнрзЗрж░ рж╕ржорзЯ ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржорзНржпрж╛ржи ржЕржержмрж╛ ржХрзБрж░рж┐рзЯрж╛рж░рзЗ ржжрзЗржмрзЗржи
		ржмрж┐ржГржжрзНрж░ржГ ржЖржорж╛ржжрзЗрж░ рж╕ржорзНржкрзБрж░рзНржг ржХрзНржпрж╛рж╢ ржЕржи ржбрзЗрж▓рж┐ржнрж╛рж░рж┐рж░ ржХрзЛржи рж╕рж┐рж╖рзНржЯрзЗржо ржирзЗржЗред`;
      }

      document.getElementById("invoiceText").value = text;
      document.getElementById("invoiceProductTotal").innerText = `рз│ ${productTotal}`;
      document.getElementById("invoiceDelivery").innerText = `рз│ ${delivery}`;
      document.getElementById("invoiceTotal").innerText = `рз│ ${total}`;
      document.getElementById("finalSummary").style.display = "block";
    }

    function submitAndPrint() {
      submitInvoice();
      setTimeout(() => {
        window.print();
      }, 200);
    }

    function copyText() {
      const textarea = document.getElementById("invoiceText");
      textarea.select();
      document.execCommand("copy");
      alert("ржХржкрж┐ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ");
    }

    function downloadPDF() {
      submitInvoice();
      const element = document.querySelector(".container");
      const opt = {
        margin: 0.5,
        filename: 'invoice.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
      };
      html2pdf().set(opt).from(element).save();
    }

    function clearAll() {
      selectedItems.length = 0;
      document.getElementById("selectedItems").innerHTML = "";
      document.getElementById("deliveryCharge").value = "";
      document.getElementById("paymentAmount").value = "";
      document.getElementById("invoiceText").value = "";
      document.getElementById("productSelect").selectedIndex = 0;
      document.getElementById("productTotal").innerText = "рз│ рзж";
      document.getElementById("finalSummary").style.display = "none";
    }

    updateDate();
  </script>
</body>
</html>

